
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../pi-epics-install/">
      
      
        <link rel="next" href="../pi-systemd-softioc-setup/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Install StreamDevice - Sidekick EPICS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#build-and-install-streamdevice-on-raspberry-pi-20-minutes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Sidekick EPICS Documentation" class="md-header__button md-logo" aria-label="Sidekick EPICS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sidekick EPICS Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Install StreamDevice
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Sidekick EPICS Documentation" class="md-nav__button md-logo" aria-label="Sidekick EPICS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sidekick EPICS Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sidekick-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sidekick-motivation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Motivation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sidekick-analogies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Laboratory Analogies
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Model 1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Model 1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model1-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model1-process-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Process Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Client Demos (Python)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Client Demos (Python)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../demos/HelloSidekick/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hello, Sidekick System!
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../demos/OpenLoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open Loop: Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../demos/OpenLoopBrightness/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open Loop Demo: Stepping through LED Brightnesses
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../demos/OpenLoopHRR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open Loop: High Rep Rate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../demos/ClosedLoopBasics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Closed Loop: Basics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Building from Scratch
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Building from Scratch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model1-source-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Source Code/CAD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi-flash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flash Your Raspberry Pi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi-first-boot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    First Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi-epics-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install EPICS v7
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Install StreamDevice
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Install StreamDevice
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-requisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#materials" class="md-nav__link">
    <span class="md-ellipsis">
      Materials
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    <span class="md-ellipsis">
      Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi-systemd-softioc-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install and Configure systemd-ioc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi-systemd-softioc-sidekick/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download Sidekick IOCs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Model 3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Model 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model3/model3-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model3/model3-process-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Process Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model3/model3-hardware-triggers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardware Trigger Details
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model3/model3-ioc-administration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IOC Administration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Building from Scratch
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            Building from Scratch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model3/model3-source-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Source Code/CAD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model3/model3-flash-teensy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flashing Teensy Firmware
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Clients
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Clients
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../epics_on_windows_via_anaconda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../css-phoebus-install-windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graphical Client
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About Us
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-requisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#materials" class="md-nav__link">
    <span class="md-ellipsis">
      Materials
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    <span class="md-ellipsis">
      Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<div><h1 id="build-and-install-streamdevice-on-raspberry-pi-20-minutes">Build and Install StreamDevice on Raspberry Pi (20 minutes)<a class="headerlink" href="#build-and-install-streamdevice-on-raspberry-pi-20-minutes" title="Permanent link">¶</a></h1>
<p>By following these instructions, you will build and install StreamDevice, a supplemental package for EPICS. </p>
<p>StreamDevice will facilitate your serial communication with Ethernet devices and USB devices (such as an Arduino).</p>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">¶</a></h2>
<ol>
<li><a href="https://docs.epics-controls.org/projects/how-tos/en/latest/getting-started/installation.html">EPICS 7 getting started guide</a></li>
<li><a href="https://paulscherrerinstitute.github.io/StreamDevice/setup.html">StreamDevice setup guide</a></li>
</ol>
<h2 id="pre-requisites">Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permanent link">¶</a></h2>
<ul>
<li>EPICS v7 is already installed on your Raspberry Pi, per prior instructions</li>
<li>Capability to SSH into your Raspberry Pi</li>
<li>Working internet connection for your Raspberry Pi</li>
</ul>
<h2 id="materials">Materials<a class="headerlink" href="#materials" title="Permanent link">¶</a></h2>
<ul>
<li>Local area network</li>
<li>Laptop / computer, connected to local area network</li>
<li>Raspberry Pi, connected to local area network</li>
</ul>
<h2 id="steps">Steps<a class="headerlink" href="#steps" title="Permanent link">¶</a></h2>
<h3 id="ssh-into-your-raspberry-pi">SSH into your Raspberry Pi.<a class="headerlink" href="#ssh-into-your-raspberry-pi" title="Permanent link">¶</a></h3>
<p>Follow the prior instructions to SSH into your Raspberry Pi from your Laptop / Computer.</p>
<h3 id="install-dependencies-for-streamdevice-10-minutes">Install dependencies for StreamDevice (10 minutes)<a class="headerlink" href="#install-dependencies-for-streamdevice-10-minutes" title="Permanent link">¶</a></h3>
<h5 id="install-pcre-packages">Install PCRE packages<a class="headerlink" href="#install-pcre-packages" title="Permanent link">¶</a></h5>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libpcre3<span class="w"> </span>libpcre3-dev
</code></pre></div>
<p>Note: libpcre3 (runtime files) is probably already installed, but libpcre3-dev (include files, etc) is probably not.</p>
<h6 id="optional-verify-pcre-installation">(Optional) Verify PCRE installation<a class="headerlink" href="#optional-verify-pcre-installation" title="Permanent link">¶</a></h6>
<p>Check that <code>/usr/include/</code> now contains header files for PCRE, such as <code>pcre.h</code>, and that <code>/usr/lib/x86_64-linux-gnu/</code> now contains files such as <code>libpcre.so</code>. You can do this in at least two ways:</p>
<h6 id="optional-option-a-for-verification-go-check-out-package-details-for-libpcre3-and-libpcre3-dev-and-see-where-items-went">(Optional) Option A for verification: Go check out package details for libpcre3 and libpcre3-dev and see where items went<a class="headerlink" href="#optional-option-a-for-verification-go-check-out-package-details-for-libpcre3-and-libpcre3-dev-and-see-where-items-went" title="Permanent link">¶</a></h6>
<p>See the official Debian references online for package lists, then go to "list files" under your architecture.</p>
<h6 id="optional-option-b-for-verification-call-these-two-commands">(Optional) Option B for verification: Call these two commands:<a class="headerlink" href="#optional-option-b-for-verification-call-these-two-commands" title="Permanent link">¶</a></h6>
<p>Call <code>whereis pcre</code>. This returns for my system: </p>
<div class="highlight"><pre><span></span><code>pcre:<span class="w"> </span>/usr/include/pcre.h<span class="w"> </span>/usr/share/man/man3/pcre.3.gz
</code></pre></div>
<p>Then, call <code>whereis libpcre</code>. This returns for my system:</p>
<div class="highlight"><pre><span></span><code>libpcre:<span class="w"> </span>/usr/lib/arm-linux-gnueabihf/libpcre.a<span class="w"> </span>/usr/lib/arm-linux-gnueabihf/libpcre32.so<span class="w"> </span>/usr/lib/arm-linux-gnueabihf/libpcre.so<span class="w"> </span>/usr/lib/arm-linux-gnueabihf/libpcre32.a<span class="w"> </span>/usr/lib/arm-linux-gnueabihf/libpcre16.a<span class="w"> </span>/usr/lib/arm-linux-gnueabihf/libpcre16.so
</code></pre></div>
<h3 id="compile-and-install-asyn">Compile and install asyn<a class="headerlink" href="#compile-and-install-asyn" title="Permanent link">¶</a></h3>
<p>The <em>asyn</em> EPICS support module is another pre-requisite for <em>streamDevice</em>.</p>
<p>Navigate into the directory you made to hold EPICS items, into which you cloned the epics-base repository, and create a new folder to hold support items for EPICS base (e.g. additional modules).</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/EPICS
mkdir<span class="w"> </span>support
<span class="nb">cd</span><span class="w"> </span>support
</code></pre></div>
<p>Download asynDriver module source code and navigate into the folder</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/epics-modules/asyn.git
<span class="nb">cd</span><span class="w"> </span>asyn
</code></pre></div>
<p>Edit the <code>configure/RELEASE</code> file for asyn.</p>
<div class="highlight"><pre><span></span><code>nano<span class="w"> </span>configure/RELEASE
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">#RELEASE Location of external products</span>

<span class="nv">SUPPORT</span><span class="o">=</span>/home/pi/EPICS/support

<span class="c1">#  IPAC is only necessary if support for Greensprings IP488 is required</span>
<span class="c1">#  IPAC release V2-7 or later is required.</span>
<span class="c1"># IPAC=$(SUPPORT)/ipac-2-15</span>

<span class="c1"># SEQ is required for testIPServer</span>
<span class="c1"># SNCSEQ=$(SUPPORT)/seq-2-2-5</span>

<span class="c1">## For sCalcout support in asynOctet - applications include asynCalc.dbd</span>
<span class="c1"># CALC=$(SUPPORT)/calc-3-7-3</span>

<span class="c1"># If CALC was built with SSCAN support then SSCAN must be defined for testEpicsApp</span>
<span class="c1"># SSCAN=$(SUPPORT)/sscan-2-11-3</span>

<span class="c1">#  EPICS_BASE 3.14.6 or later is required</span>
<span class="nv">EPICS_BASE</span><span class="o">=</span>/home/pi/EPICS/epics-base

-include<span class="w"> </span><span class="k">$(</span>TOP<span class="k">)</span>/../RELEASE.local
-include<span class="w"> </span><span class="k">$(</span>TOP<span class="k">)</span>/../RELEASE.<span class="k">$(</span>EPICS_HOST_ARCH<span class="k">)</span>.local
-include<span class="w"> </span><span class="k">$(</span>TOP<span class="k">)</span>/configure/RELEASE.local
</code></pre></div>
<p>Above, we have edited the file to:</p>
<ol>
<li>
<p>Comment out unneeded lines IPAC, SEQ, CALC, SSCAN, etc.</p>
</li>
<li>
<p>Set the SUPPORT and EPICS_BASE variables to point to the right folders for your computer</p>
</li>
</ol>
<p>Save this file and then build the software.</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>-j8
</code></pre></div>
<p>(took me about five minutes)</p>
<h3 id="compile-and-install-streamdevice">Compile and install StreamDevice<a class="headerlink" href="#compile-and-install-streamdevice" title="Permanent link">¶</a></h3>
<p>Navigate back into the directory you made to hold EPICS support items.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/EPICS/support
</code></pre></div>
<p>Download StreamDevice module source code and navigate into the folder</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/paulscherrerinstitute/StreamDevice.git
<span class="nb">cd</span><span class="w"> </span>StreamDevice
</code></pre></div>
<p>Edit the <code>configure/RELEASE</code> file for StreamDevice.</p>
<div class="highlight"><pre><span></span><code>nano<span class="w"> </span>configure/RELEASE
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">#RELEASE Location of external products</span>
<span class="c1"># Run "gnumake clean uninstall install" in the application</span>
<span class="c1"># top directory each time this file is changed.</span>
<span class="c1">#</span>
<span class="c1"># NOTE: The build does not check dependencies on files</span>
<span class="c1"># external to this application. Thus you should run</span>
<span class="c1"># "gnumake clean uninstall install" in the top directory</span>
<span class="c1"># each time EPICS_BASE, SNCSEQ, or any other external</span>
<span class="c1"># module defined in the RELEASE file is rebuilt.</span>

<span class="nv">TEMPLATE_TOP</span><span class="o">=</span><span class="k">$(</span>EPICS_BASE<span class="k">)</span>/templates/makeBaseApp/top

<span class="c1"># If you don't want to install into $(TOP) then</span>
<span class="c1"># define INSTALL_LOCATION_APP here</span>
<span class="c1">#INSTALL_LOCATION_APP=&lt;fullpathname&gt;</span>

<span class="nv">SUPPORT</span><span class="o">=</span><span class="k">$(</span>TOP<span class="k">)</span>/..
-include<span class="w"> </span><span class="k">$(</span>TOP<span class="k">)</span>/../configure/SUPPORT.<span class="k">$(</span>EPICS_HOST_ARCH<span class="k">)</span>

<span class="nv">ASYN</span><span class="o">=</span><span class="k">$(</span>SUPPORT<span class="k">)</span>/asyn
<span class="c1">#CALC=$(SUPPORT)/calc-3-7</span>
<span class="c1">#PCRE=$(SUPPORT)/pcre-7-2</span>

<span class="c1"># EPICS_BASE usually appears last so other apps can override stuff:</span>
<span class="nv">EPICS_BASE</span><span class="o">=</span>/home/pi/EPICS/epics-base

<span class="c1"># These lines allow developers to override these RELEASE settings</span>
<span class="c1"># without having to modify this file directly.</span>
-include<span class="w"> </span><span class="k">$(</span>TOP<span class="k">)</span>/../RELEASE.local
-include<span class="w"> </span><span class="k">$(</span>TOP<span class="k">)</span>/../RELEASE.<span class="k">$(</span>EPICS_HOST_ARCH<span class="k">)</span>.local
-include<span class="w"> </span><span class="k">$(</span>TOP<span class="k">)</span>/configure/RELEASE.local
</code></pre></div>
<p>Above, we have edited the <code>configure/RELEASE</code> file such that:</p>
<ol>
<li>
<p>Fix the "ASYN" line to match your actual file path from above: <code>ASYN=$(SUPPORT)/asyn</code></p>
</li>
<li>
<p>Comment out the "CALC" and "PCRE" lines</p>
</li>
<li>
<p>Set the EPICS_BASE variable to point to the right folder for your computer (SUPPORT is already set up OK)</p>
</li>
</ol>
<p>Next, edit the architecture-specific RELEASE file <code>configure/RELEASE.Common.${EPICS_HOST_ARCH}</code> for StreamDevice, so that it locates the pcre libraries you installed earlier:</p>
<div class="highlight"><pre><span></span><code>nano<span class="w"> </span>configure/RELEASE.Common.<span class="si">${</span><span class="nv">EPICS_HOST_ARCH</span><span class="si">}</span>
</code></pre></div>
<p>(This will create a new file to edit)</p>
<p>Based on examining the outputs of <code>whereis pcre</code> and <code>whereis libpcre</code> (see the earlier step where we were installing the PCRE dependency), add the following to <code>configure/RELEASE.Common.${EPICS_HOST_ARCH}</code> that match the path prefixes for our system:</p>
<div class="highlight"><pre><span></span><code><span class="nv">PCRE_INCLUDE</span><span class="o">=</span>/usr/include
<span class="nv">PCRE_LIB</span><span class="o">=</span>/usr/lib
</code></pre></div>
<p>Save the new file, then run <code>make</code> (or <code>make -j8</code> for faster results).</p></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 <a href="https://www.scottfeister.com">Scott Feister</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>