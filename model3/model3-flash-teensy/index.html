
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../model3-source-components/">
      
      
        <link rel="next" href="../../epics_on_windows_via_anaconda/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Flashing Teensy Firmware - Sidekick EPICS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#flashing-sidekick-firmware-to-the-teensy-development-boards" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Sidekick EPICS Documentation" class="md-header__button md-logo" aria-label="Sidekick EPICS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sidekick EPICS Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flashing Teensy Firmware
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Sidekick EPICS Documentation" class="md-nav__button md-logo" aria-label="Sidekick EPICS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sidekick EPICS Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sidekick-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sidekick-motivation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Motivation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sidekick-analogies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Laboratory Analogies
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Model 1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Model 1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/model1-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/model1-process-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Process Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Client Demos (Python)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Client Demos (Python)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/demos/HelloSidekick/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hello, Sidekick System!
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/demos/OpenLoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open Loop: Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/demos/OpenLoopBrightness/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open Loop Demo: Stepping through LED Brightnesses
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/demos/OpenLoopHRR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open Loop: High Rep Rate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/demos/ClosedLoopBasics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Closed Loop: Basics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Building from Scratch
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Building from Scratch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/model1-source-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Source Code/CAD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/pi-flash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flash Your Raspberry Pi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/pi-first-boot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    First Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/pi-epics-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install EPICS v7
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/pi-stream-device-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install StreamDevice
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/pi-systemd-softioc-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install and Configure systemd-ioc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model1/pi-systemd-softioc-sidekick/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download Sidekick IOCs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Model 3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Model 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model3-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model3-process-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Process Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model3-hardware-triggers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardware Trigger Details
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model3-ioc-administration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IOC Administration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Building from Scratch
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            Building from Scratch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model3-source-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Source Code/CAD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Flashing Teensy Firmware
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Flashing Teensy Firmware
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#download-sidekick-v3-firmware-source-code" class="md-nav__link">
    <span class="md-ellipsis">
      Download Sidekick v3 Firmware Source Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-and-install-teensyloader" class="md-nav__link">
    <span class="md-ellipsis">
      Download and install TeensyLoader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-and-install-the-arduino-ide" class="md-nav__link">
    <span class="md-ellipsis">
      Download and Install the Arduino IDE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-teensy-board-package-for-the-arduino-ide" class="md-nav__link">
    <span class="md-ellipsis">
      Install Teensy Board Package for the Arduino IDE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-third-party-libraries-sidekick-v3-dependencies-into-the-arduino-ide" class="md-nav__link">
    <span class="md-ellipsis">
      Install Third-Party Libraries (Sidekick v3 Dependencies) into the Arduino IDE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compile-firmware-for-pulsegenerator" class="md-nav__link">
    <span class="md-ellipsis">
      Compile Firmware for PulseGenerator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flash-firmware-for-pulsegenerator" class="md-nav__link">
    <span class="md-ellipsis">
      Flash Firmware for PulseGenerator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compile-and-flash-other-sketches" class="md-nav__link">
    <span class="md-ellipsis">
      Compile and Flash Other Sketches
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Clients
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Clients
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../epics_on_windows_via_anaconda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../css-phoebus-install-windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graphical Client
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About Us
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#download-sidekick-v3-firmware-source-code" class="md-nav__link">
    <span class="md-ellipsis">
      Download Sidekick v3 Firmware Source Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-and-install-teensyloader" class="md-nav__link">
    <span class="md-ellipsis">
      Download and install TeensyLoader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-and-install-the-arduino-ide" class="md-nav__link">
    <span class="md-ellipsis">
      Download and Install the Arduino IDE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-teensy-board-package-for-the-arduino-ide" class="md-nav__link">
    <span class="md-ellipsis">
      Install Teensy Board Package for the Arduino IDE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-third-party-libraries-sidekick-v3-dependencies-into-the-arduino-ide" class="md-nav__link">
    <span class="md-ellipsis">
      Install Third-Party Libraries (Sidekick v3 Dependencies) into the Arduino IDE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compile-firmware-for-pulsegenerator" class="md-nav__link">
    <span class="md-ellipsis">
      Compile Firmware for PulseGenerator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flash-firmware-for-pulsegenerator" class="md-nav__link">
    <span class="md-ellipsis">
      Flash Firmware for PulseGenerator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compile-and-flash-other-sketches" class="md-nav__link">
    <span class="md-ellipsis">
      Compile and Flash Other Sketches
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<div><h1 id="flashing-sidekick-firmware-to-the-teensy-development-boards">Flashing Sidekick Firmware to the Teensy Development Boards<a class="headerlink" href="#flashing-sidekick-firmware-to-the-teensy-development-boards" title="Permanent link">¶</a></h1>
<p>We are using <a href="https://www.pjrc.com/teensy/index.html">Teensy 4.0 or Teensy 4.1 development boards</a> to mimic real laboratory devices. This requires flashing our custom firmware onto these development boards.</p>
<p>You can flash firmware to the Teensys from Windows, Linux, Mac etc. The process is pretty similar to flashing firmware to an Arduino. I’ll walk through here how to flash this specific firmware to a Teensy 4.0 from Windows.</p>
<h2 id="download-sidekick-v3-firmware-source-code">Download Sidekick v3 Firmware Source Code<a class="headerlink" href="#download-sidekick-v3-firmware-source-code" title="Permanent link">¶</a></h2>
<p>From within the <a href="https://github.com/sfeister/dolphindaq">dolphindaq repository on GitHub</a>, you’ll need the entire folder called “Teensy”, as this contains the source code for all the Sidekick v3 firmwares. You will also need the subfolder "proto". Use <a href="https://git-scm.com/download/win">git on Windows</a> or equivalent to clone the entire dolphindaq repository to a local folder on your computer.</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/sfeister/dolphindaq.git
</code></pre></div>
<h2 id="download-and-install-teensyloader">Download and install TeensyLoader<a class="headerlink" href="#download-and-install-teensyloader" title="Permanent link">¶</a></h2>
<p>Install <a href="https://www.pjrc.com/teensy/loader.html">TeensyLoader</a>. This will let you flash HEX files to your Teensy, which is the last step after compiling source code. It also may contain some necessary USB drivers for the Teensy (I’m not sure.)</p>
<p>If all you want to do is flash already-compiled firmware, stop here and use TeensyLoader to do what you want. If you want to compile the firmware from source code, you’ll also want to get the Arduino IDE and its integrations for Teensy.</p>
<h2 id="download-and-install-the-arduino-ide">Download and Install the Arduino IDE<a class="headerlink" href="#download-and-install-the-arduino-ide" title="Permanent link">¶</a></h2>
<p><a href="https://www.arduino.cc/en/software">Download and install the Arduino IDE</a> (follow the link). I downloaded the “MSI installer” for the latest version, Version 2.3.2. Don’t use any version less than 2.0 as the instructions would be different.</p>
<h2 id="install-teensy-board-package-for-the-arduino-ide">Install Teensy Board Package for the Arduino IDE<a class="headerlink" href="#install-teensy-board-package-for-the-arduino-ide" title="Permanent link">¶</a></h2>
<p>Install Teensy into the Arduino IDE. Documentation below adapted from the source: <a href="https://www.pjrc.com/teensy/td_download.html">Teensyduino</a></p>
<p>Open the Arduino IDE v2.0+</p>
<p>Click File &gt; Preferences (on MacOS, click Arduino IDE &gt; Settings).</p>
<p>As shown in the screenshot below: In the text box called "Additional boards manager URLs", paste the following: https://www.pjrc.com/teensy/package_teensy_index.json</p>
<p><img alt="Additional boards manager" src="https://github.com/user-attachments/assets/752baafc-3120-468b-b8c3-fd5825a7ada4"></p>
<p>Then, click “Ok.”</p>
<p>As shown in the screenshot below: In the main Arduino window, open Boards Manager by clicking the left-side board icon.</p>
<p><img alt="Open Boards Manager" src="https://github.com/user-attachments/assets/2b74beb4-bdea-421e-bd87-015f9df967d0"></p>
<p>As shown in the screenshot below, within the boards manager, search for "teensy", and click "Install" to install “Teensy by Paul Stroffregon.”</p>
<p><img alt="Teensyduino Install" src="https://github.com/user-attachments/assets/7f26d13d-0dd6-4518-867a-9a37b68b5a20"></p>
<p>Although the screenshot above shows an older version of Teensy by Paul Stroffregen, I am using the latest version (1.59.0).</p>
<h2 id="install-third-party-libraries-sidekick-v3-dependencies-into-the-arduino-ide">Install Third-Party Libraries (Sidekick v3 Dependencies) into the Arduino IDE<a class="headerlink" href="#install-third-party-libraries-sidekick-v3-dependencies-into-the-arduino-ide" title="Permanent link">¶</a></h2>
<h3 id="third-party-libraries-from-library-manager">Third-Party Libraries from Library Manager<a class="headerlink" href="#third-party-libraries-from-library-manager" title="Permanent link">¶</a></h3>
<p>As shown in the screen shot below: In the main Arduino window, open Library manager by click the left-side books icon.</p>
<p><img alt="Open Library Manager" src="https://github.com/user-attachments/assets/385b28ff-4aac-4c73-9645-39d74fa97221"></p>
<p>From the Library Manager, search for and install the following packages:</p>
<ol>
<li><strong>Chrono </strong>by Thomas O. Fredricks (I had the latest version, 1.2.0 installed)</li>
<li><strong>SCPI_Parser </strong>by Jan Breuer (I had the latest version, 2.2.0 installed)</li>
<li><strong>TeensyTimerTool </strong>by luni64. (I had the latest version, 1.4.1 installed)</li>
</ol>
<h3 id="third-party-libraries-from-source-code">Third-Party Libraries from Source Code<a class="headerlink" href="#third-party-libraries-from-source-code" title="Permanent link">¶</a></h3>
<p>The other sketches may require two other libraries which are not accesible through the library manager, so you'll need to install them yourself by-hand. This involves downloading library folders and copying them into the right local folder.</p>
<p>ADC is the entire repository folder of <a href="https://github.com/pedvide/ADC">https://github.com/pedvide/ADC</a></p>
<p>ddaqproto folder is the “ddaqproto” folder in dolphindaq repository at [dolphindaq]/proto/compiled_arduino/</p>
<p>Copy the folders “ddaqproto” and “ADC” to the following libraries folder:</p>
<ol>
<li>Windows: C:\Users{username}\Documents\Arduino\libraries</li>
<li>macOS: /Users/{username}/Documents/Arduino/libraries</li>
<li>Linux: /home/{username}/Arduino/libraries</li>
</ol>
<h2 id="compile-firmware-for-pulsegenerator">Compile Firmware for PulseGenerator<a class="headerlink" href="#compile-firmware-for-pulsegenerator" title="Permanent link">¶</a></h2>
<p>We’ll start off by compiling and flashing the firmware that will run the system pulse generator in the Sidekick v3.</p>
<p>As shown in the screenshot below, from the “File → Open” menu of Arduino IDE, navigate into the “Teensy” folder of the dolphindaq repository (which you just cloned to your local PC).</p>
<p><img alt="Teensy Folder on Windows" src="https://github.com/user-attachments/assets/60307d23-fa4f-4ff6-8ac4-e5686195d6b4"></p>
<p>Then navigate into the firmware subfolder for the device you wish to flash: in our case for this device, we want the PulseGeneratorSerial.</p>
<p><img alt="PulseGeneratorSerial Folder on Windows" src="https://github.com/user-attachments/assets/13d8242f-5deb-4c43-affb-e38d018464b3"></p>
<p>Select the “PulseGeneratorSerial.ino” file to open the source code in the Arduino IDE, as shown below.</p>
<p><img alt="PulseGeneratorSerial Sketch File" src="https://github.com/user-attachments/assets/67f9ffb1-5a41-402a-9ab4-4791136faedc"></p>
<p>Your Arduino IDE should pop open and now look something like this:</p>
<p><img alt="PulseGeneratorSerial Open in IDE" src="https://github.com/user-attachments/assets/7b7e4955-1855-4b41-8b24-6e4dc2df0152"></p>
<p>Notice the tabs to right of PulseGeneratorSerial.ino are the other files in the same PulseGeneratorSerial folder. Those .h and .cpp files are also used in compililng this firmware.</p>
<p>To help with troubleshooting, you may wish to adjust the Arduino IDE settings for verbose output during compiling.</p>
<p><img alt="Verbose Output" src="https://github.com/user-attachments/assets/81de5d93-5510-4c30-af36-cea968773638"></p>
<p>Plug in the Teensy 4.0/4.1 into your computer. As shown in the screenshot below, you should now be able to select it from the dropdown menu.</p>
<p><img alt="Teensy USB COM Ports" src="https://github.com/user-attachments/assets/f20083c0-4b83-469d-926f-86428aed2499"></p>
<p>Do a test compile to make sure everything works right. You can compile the code (without flashing it to the Teensy) by clicking “Verify”.</p>
<p><img alt="Verify Button Arduino IDE" src="https://github.com/user-attachments/assets/3f8f5c6e-828b-4361-b9c6-5da2df40bda4"></p>
<p>A successful compile will take a few minutes and then end with a message such as this:</p>
<p><img alt="Successful Compile Output" src="https://github.com/user-attachments/assets/19d92129-96f1-433c-9b10-7f5d61b4b1e3"></p>
<h2 id="flash-firmware-for-pulsegenerator">Flash Firmware for PulseGenerator<a class="headerlink" href="#flash-firmware-for-pulsegenerator" title="Permanent link">¶</a></h2>
<p>When you are ready to flash the firmware instead of just verifying the compile, select "Run" in the Arduino IDE.</p>
<h2 id="compile-and-flash-other-sketches">Compile and Flash Other Sketches<a class="headerlink" href="#compile-and-flash-other-sketches" title="Permanent link">¶</a></h2>
<p>You should now have the toolchain to compile and flash any firmware for the Sidekick Model 3.</p></div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 <a href="https://www.scottfeister.com">Scott Feister</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>